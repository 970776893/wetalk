var dependencies=["ngAnimate","ngRoute","ngTouch"],app=angular.module("app",dependencies);app.animation(".talk-item-animation",function(){return{enter:function(a,b){a.width();a.css({position:"relative",left:-10,opacity:0}),a.animate({left:0,opacity:1},b)},leave:function(a,b){a.css({position:"relative",left:0,opacity:1}),a.animate({left:-10,opacity:0},b)},move:function(a,b){a.css({left:"2px",opacity:.5}),a.animate({left:"0px",opacity:1},b)}}}),app.animation(".view-slide-animation",function(){return{enter:function(a,b){a.css({opacity:.5,position:"relative",top:"10px",left:"20px"}).animate({top:0,left:0,opacity:1},1e3,b)}}}),app.factory("popup",function(a){return{confim:function(b,c){return a.open({animation:!0,templateUrl:"/app/modules/base/htmls/confim.part.html",controller:function(a,d){a.title=b,a.msg=c,a.ok=function(){d.close("ok")},a.cancel=function(){d.dismiss("cancel")}}})}}}),app.config(function(a){a.defaults.headers.post["Content-Type"]="application/json;charset=utf-8"}),app.directive("weLayout",function(){return{restrict:"EA",templateUrl:"/app/modules/base/htmls/layout.part.html",controller:function(a,b,c){b.$on("$locationChangeSuccess",function(a,d,e){b.url=c.$$url;var f="we-"+d.substring(d.indexOf("#")+2).toLocaleLowerCase().replace("/","-");if($("body").addClass(f),d!==e){var g="we-"+e.substring(e.indexOf("#")+2).toLocaleLowerCase().replace("/","-");$("body").removeClass(g)}})}}}),app.directive("ngTouchstart",function(){return{controller:function(a,b,c){function d(c){var d=b.attr("ng-touchstart");a.$event=c,a.$apply(d)}b.bind("touchstart",d)}}}),app.directive("ngTouchmove",function(){return{controller:function(a,b,c){function d(a){a.preventDefault(),b.bind("touchmove",e),b.bind("touchend",f)}function e(c){var d=b.attr("ng-touchmove");a.$event=c,a.$apply(d)}function f(a){a.preventDefault(),b.unbind("touchmove",e),b.unbind("touchend",f)}b.bind("touchstart",d)}}}),app.directive("ngTouchend",function(){return{controller:function(a,b,c){function d(c){var d=b.attr("ng-touchend");a.$event=c,a.$apply(d)}b.bind("touchend",d)}}}),app.filter("userStatusFilter",function(a){return function(b){var c=a.i18n.user,d=Number(b);return 0===d?c.statusNormal:1===d?c.statusFrozen:a.i18n["public"].unKnow}}),app.config(function(a){a.when("/userList",{templateUrl:"/app/modules/user/htmls/user_list.html",controller:"userListController"}).when("/talkList",{templateUrl:"/app/modules/talk/htmls/talk_list.html",controller:"talkListController"}).when("/talkWindow",{templateUrl:"/app/modules/talk/htmls/talk_window.html",controller:"talkWindowController"}).otherwise({templateUrl:"/app/modules/base/htmls/unknow.part.html"})}),app.service("commonService",function(a){return{getPublicKey:function(b){return a({url:"/easyShopping/rsa/getPublicKey.json",method:"get",dataType:"json",params:{userId:b}})}}}),app.controller("talkListController",function(a,b,c){b.talkList=[{id:1,name:"陈奕迅1",isRead:0},{id:1,name:"陈奕迅1",isRead:1},{id:1,name:"陈奕迅1",isRead:1},{id:1,name:"陈奕迅1",isRead:0},{id:1,name:"陈奕迅1",isRead:1},{id:1,name:"陈奕迅1",isRead:0}],b.queryKeyList=["A","B","C","D","E","F"],b.showUserOpt=function(a,c){angular.forEach(b.userList,function(a){a.id!==c.id&&(a.isShow=!1)}),c.isShow=!c.isShow},b.talk=function(a){c.path("/talkWindow")}}),app.controller("talkWindowController",function(a,b,c){b.historyList=[{id:1,content:"双双真矫情",isMine:0},{id:1,content:"对呀对呀",isMine:1},{id:1,content:"反正是很污反正是很污反正是很污反正是很污反正是很污反正是很污反正是很污反正是很污反正是很污",isMine:1},{id:1,content:"有多污啊",isMine:0},{id:1,content:"反正是很污反正是很污反正是很污反正是很污反正是很污反正是很污反正是很污反正是很污反正是很污",isMine:0}],b.keySend=function(a){13===a.keyCode&&b.sendMsg()},b.sendMsg=function(){b.inputContent&&(b.sending=!0,b.historyList.push({id:1,content:b.inputContent,isMine:1}),$(document).scrollTop($(document).height()),b.inputContent=null,b.sending=!1)}}),app.controller("userListController",function(a,b,c){b.userList=[{id:1,name:"陈奕迅1"},{id:2,name:"陈奕迅2"},{id:3,name:"陈奕迅3"},{id:4,name:"陈奕迅4"}],b.queryKeyList=["A","B","C","D","E","F"],b.showUserOpt=function(a,c){angular.forEach(b.userList,function(a){a.id!==c.id&&(a.isShow=!1)}),c.isShow=!c.isShow}});